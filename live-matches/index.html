<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>مباريات اليوم | ALI ALESSA</title>
  <meta name="description" content="تابع نتائج مباريات اليوم مباشرة مع معرفة المعلقين والنتائج لحظة بلحظة"/>
  <meta name="theme-color" content="#0a0e14"/>
  <link rel="canonical" href="https://alialessa.info/live-matches/"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#0a0e14; --surface:#0e1319; --stroke:#1a2535; --text:#e4eaf0;
      --muted:#8a95a3; --brand:#4a7ab5; --accent:#6b9fd4; --radius:14px;
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    html{scroll-behavior:smooth;}
    body{
      font-family:'IBM Plex Sans Arabic','IBM Plex Sans',system-ui,sans-serif;
      color:var(--text);background:var(--bg);line-height:1.6;
      background:radial-gradient(1200px 600px at 80% -10%,rgba(74,122,181,.12),transparent 60%),
                 radial-gradient(1000px 600px at 10% -20%,rgba(107,159,212,.08),transparent 60%),
                 var(--bg);
      background-attachment:fixed;
    }
    #bg-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;}

    /* Header */
    .header{
      position:sticky;top:0;z-index:30;
      border-bottom:1px solid var(--stroke);
      background:rgba(10,14,20,.92);
      backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
    }
    .header-inner{max-width:1100px;margin:0 auto;padding:16px 20px;}
    .top-row{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;margin-bottom:14px;}
    .title-area{display:flex;align-items:center;gap:12px;}
    .title-area h1{font-size:1.4rem;font-weight:700;color:var(--text);}
    .live-badge{
      display:inline-flex;align-items:center;gap:6px;
      background:rgba(239,68,68,.15);border-radius:20px;
      padding:4px 12px;font-size:.75rem;font-weight:600;color:#f87171;
    }
    .live-dot{width:8px;height:8px;border-radius:50%;background:#ef4444;animation:pulse 1.5s infinite;}
    @keyframes pulse{0%,100%{opacity:1;}50%{opacity:.4;}}
    .actions{display:flex;gap:8px;}
    .btn{
      display:inline-flex;align-items:center;gap:6px;
      padding:8px 14px;border-radius:10px;border:none;
      font-family:inherit;font-size:.8rem;font-weight:600;
      cursor:pointer;transition:all .2s;color:var(--muted);
      background:var(--stroke);
    }
    .btn:hover{color:var(--text);background:rgba(74,122,181,.2);}
    .btn.active{color:#facc15;background:rgba(250,204,21,.12);}
    .btn svg{width:16px;height:16px;}

    /* Date selector */
    .date-row{display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:12px;}
    .date-btn{
      background:var(--stroke);border:none;color:var(--text);
      padding:8px 14px;border-radius:10px;font-family:inherit;
      font-size:.9rem;cursor:pointer;transition:all .2s;
    }
    .date-btn:hover{background:rgba(74,122,181,.2);}
    .date-label{min-width:200px;text-align:center;font-size:.9rem;font-weight:500;}
    .today-btn{
      background:rgba(74,122,181,.15);color:var(--brand);
      border:none;padding:8px 14px;border-radius:10px;
      font-family:inherit;font-size:.8rem;font-weight:600;cursor:pointer;
      transition:all .2s;
    }
    .today-btn:hover{background:rgba(74,122,181,.25);}

    /* League filter */
    .leagues{display:flex;gap:8px;overflow-x:auto;padding-bottom:4px;scrollbar-width:none;}
    .leagues::-webkit-scrollbar{display:none;}
    .league-btn{
      flex-shrink:0;padding:6px 16px;border-radius:20px;border:none;
      font-family:inherit;font-size:.78rem;font-weight:600;
      cursor:pointer;transition:all .2s;white-space:nowrap;
      background:var(--stroke);color:var(--muted);
    }
    .league-btn:hover{color:var(--text);}
    .league-btn.active{background:var(--brand);color:#fff;}

    /* Main content */
    .main{max-width:1100px;margin:0 auto;padding:24px 20px;}
    .status-bar{text-align:center;font-size:.75rem;color:#555;margin-bottom:16px;}

    /* Match grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px;}
    .grid.list-view{grid-template-columns:1fr;}

    /* Match card */
    .card{
      border-radius:var(--radius);border:1px solid var(--stroke);
      background:rgba(14,19,25,.8);overflow:hidden;transition:all .2s;
    }
    .card:hover{box-shadow:0 8px 30px rgba(74,122,181,.08);}
    .card.is-live{border-color:rgba(239,68,68,.25);}

    .card-top{
      display:flex;align-items:center;justify-content:space-between;
      padding:10px 16px;border-bottom:1px solid var(--stroke);
    }
    .card-league{font-size:.75rem;color:var(--muted);}
    .card-status{
      font-size:.72rem;font-weight:600;padding:3px 10px;border-radius:12px;
    }
    .st-scheduled{background:#374151;color:#d1d5db;}
    .st-live{background:#dc2626;color:#fff;animation:pulse 1.5s infinite;}
    .st-halftime{background:#d97706;color:#fff;}
    .st-finished{background:#4b5563;color:#d1d5db;}

    .card-body{padding:20px 16px;}
    .teams-row{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:12px;}
    .team{display:flex;flex-direction:column;align-items:center;gap:8px;text-align:center;}
    .team-logo{
      width:44px;height:44px;border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      font-size:1.1rem;font-weight:700;color:var(--brand);
      background:rgba(74,122,181,.12);
    }
    .team-name{font-size:.85rem;font-weight:600;}
    .score-area{display:flex;flex-direction:column;align-items:center;gap:4px;}
    .score{font-size:1.6rem;font-weight:700;display:flex;gap:8px;}
    .score .sep{color:#555;}
    .time-display{font-size:1.2rem;font-weight:700;color:var(--brand);}
    .minute-tag{font-size:.72rem;color:#f87171;margin-top:2px;}

    .commentator{
      display:flex;align-items:center;justify-content:center;gap:8px;
      margin-top:16px;padding:10px;border-radius:10px;
      background:rgba(26,37,53,.4);font-size:.82rem;color:#aaa;
    }
    .commentator svg{width:16px;height:16px;color:#666;flex-shrink:0;}
    .verified{color:#60a5fa;width:16px;height:16px;flex-shrink:0;}

    .card-actions{
      display:flex;align-items:center;justify-content:space-between;
      padding:10px 16px;border-top:1px solid var(--stroke);
    }
    .action-btn{
      display:inline-flex;align-items:center;gap:6px;
      padding:6px 12px;border-radius:8px;border:none;
      background:transparent;font-family:inherit;
      font-size:.75rem;color:var(--muted);cursor:pointer;
      transition:all .15s;
    }
    .action-btn:hover{background:rgba(255,255,255,.05);}
    .action-btn svg{width:16px;height:16px;}
    .action-btn.fav-on{color:#facc15;}
    .action-btn.fav-on svg{fill:#facc15;}
    .action-btn.notif-on{color:var(--brand);}

    /* States */
    .loading,.empty,.error-box{
      display:flex;flex-direction:column;align-items:center;
      justify-content:center;padding:80px 20px;text-align:center;
    }
    .spinner{
      width:40px;height:40px;border-radius:50%;
      border:4px solid var(--stroke);border-top-color:var(--brand);
      animation:spin .8s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg);}}
    .loading p{margin-top:16px;font-size:.9rem;color:var(--muted);}
    .empty p{font-size:1rem;color:var(--muted);}
    .empty .sub{font-size:.85rem;color:#555;margin-top:8px;}

    /* Back link */
    .back-link{
      display:inline-flex;align-items:center;gap:6px;
      color:var(--muted);text-decoration:none;font-size:.85rem;
      margin-bottom:16px;transition:color .2s;
    }
    .back-link:hover{color:var(--brand);}

    @media(max-width:640px){
      .grid{grid-template-columns:1fr;}
      .header-inner{padding:12px 14px;}
      .title-area h1{font-size:1.15rem;}
      .date-label{min-width:160px;font-size:.82rem;}
      .main{padding:16px 14px;}
    }
  </style>
</head>
<body>
  <canvas id="bg-canvas"></canvas>

  <!-- Header -->
  <header class="header" id="header">
    <div class="header-inner">
      <div class="top-row">
        <div class="title-area">
          <h1>مباريات اليوم</h1>
          <span class="live-badge" id="liveBadge" style="display:none;">
            <span class="live-dot"></span>
            <span id="liveCount"></span> مباشر
          </span>
        </div>
        <div class="actions">
          <button class="btn" id="favFilter" onclick="toggleFavFilter()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>
            المفضلة
          </button>
          <button class="btn" id="viewToggle" onclick="toggleView()">
            <svg id="viewIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/></svg>
          </button>
        </div>
      </div>
      <div class="date-row">
        <button class="date-btn" onclick="shiftDate(1)">&#8594;</button>
        <div class="date-label" id="dateLabel"></div>
        <button class="date-btn" onclick="shiftDate(-1)">&#8592;</button>
        <button class="today-btn" onclick="goToday()">اليوم</button>
      </div>
      <div class="leagues" id="leagues"></div>
    </div>
  </header>

  <!-- Main -->
  <main class="main">
    <a href="/" class="back-link">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg>
      الصفحة الرئيسية
    </a>
    <div class="status-bar" id="statusBar"></div>
    <div class="grid" id="matchGrid"></div>
    <div class="loading" id="loadingState">
      <div class="spinner"></div>
      <p>جاري تحميل المباريات...</p>
    </div>
    <div class="empty" id="emptyState" style="display:none;">
      <p>لا توجد مباريات في هذا اليوم</p>
      <p class="sub">جرّب تغيير التاريخ أو الدوري</p>
    </div>
  </main>

  <script>
    // ── Particles background ──
    (function(){
      var c=document.getElementById('bg-canvas'),x=c.getContext('2d'),p=[],
        cl=['rgba(74,122,181,','rgba(107,159,212,','rgba(138,142,154,'],n=45,cd=130;
      function r(){c.width=innerWidth;c.height=innerHeight;}
      r();addEventListener('resize',r);
      function P(){this.x=Math.random()*c.width;this.y=Math.random()*c.height;
        this.vx=(Math.random()-.5)*.5;this.vy=(Math.random()-.5)*.5;
        this.r=Math.random()*2+1;this.c=cl[Math.floor(Math.random()*cl.length)];
        this.a=Math.random()*.4+.2;}
      for(var i=0;i<n;i++)p.push(new P());
      (function a(){x.clearRect(0,0,c.width,c.height);
        for(var i=0;i<p.length;i++){var q=p[i];q.x+=q.vx;q.y+=q.vy;
          if(q.x<0)q.x=c.width;if(q.x>c.width)q.x=0;
          if(q.y<0)q.y=c.height;if(q.y>c.height)q.y=0;
          x.beginPath();x.arc(q.x,q.y,q.r,0,Math.PI*2);
          x.fillStyle=q.c+q.a+')';x.fill();
          for(var j=i+1;j<p.length;j++){var w=p[j],dx=q.x-w.x,dy=q.y-w.y,
            d=Math.sqrt(dx*dx+dy*dy);
            if(d<cd){x.beginPath();x.moveTo(q.x,q.y);x.lineTo(w.x,w.y);
              x.strokeStyle=q.c+((1-d/cd)*.12)+')';x.lineWidth=.7;x.stroke();}}}
        requestAnimationFrame(a);})();
    })();

    // ── State ──
    var currentDate = new Date();
    var currentLeague = 'all';
    var favOnly = false;
    var listView = false;
    var allMatches = [];
    var favs = JSON.parse(localStorage.getItem('fav-matches') || '[]');

    var LEAGUES = [
      {id:'all',label:'جميع الدوريات'},
      {id:'rsl',label:'دوري روشن'},
      {id:'epl',label:'الإنجليزي'},
      {id:'laliga',label:'الإسباني'},
      {id:'bundesliga',label:'الألماني'},
      {id:'seriea',label:'الإيطالي'},
      {id:'ligue1',label:'الفرنسي'},
      {id:'epl-eg',label:'المصري'}
    ];

    var COMMENTATORS = [
      'عصام الشوالي','رؤوف خليف','فهد العتيبي',
      'حفيظ دراجي','يوسف سيف','خليل البلوشي','علي سعيد الكعبي'
    ];

    var STATUS_AR = {scheduled:'لم تبدأ',live:'مباشر',halftime:'استراحة',finished:'انتهت'};

    // ── Demo data generator ──
    function generateMatches(dateStr) {
      return [
        {id:'1',home:'الهلال',away:'النصر',hs:2,as:1,status:'live',kick:dateStr+'T17:00:00Z',min:67,league:'دوري روشن السعودي',lid:'rsl'},
        {id:'2',home:'الأهلي',away:'الاتحاد',hs:null,as:null,status:'scheduled',kick:dateStr+'T19:30:00Z',min:null,league:'دوري روشن السعودي',lid:'rsl'},
        {id:'3',home:'ريال مدريد',away:'برشلونة',hs:1,as:1,status:'halftime',kick:dateStr+'T20:00:00Z',min:45,league:'الدوري الإسباني',lid:'laliga'},
        {id:'4',home:'ليفربول',away:'مانشستر سيتي',hs:3,as:2,status:'finished',kick:dateStr+'T15:00:00Z',min:90,league:'الدوري الإنجليزي',lid:'epl'},
        {id:'5',home:'باريس سان جيرمان',away:'مارسيليا',hs:null,as:null,status:'scheduled',kick:dateStr+'T21:00:00Z',min:null,league:'الدوري الفرنسي',lid:'ligue1'},
        {id:'6',home:'بايرن ميونخ',away:'دورتموند',hs:2,as:0,status:'live',kick:dateStr+'T18:30:00Z',min:52,league:'الدوري الألماني',lid:'bundesliga'},
        {id:'7',home:'يوفنتوس',away:'إنتر ميلان',hs:1,as:2,status:'finished',kick:dateStr+'T14:00:00Z',min:90,league:'الدوري الإيطالي',lid:'seriea'},
        {id:'8',home:'الزمالك',away:'الأهلي المصري',hs:0,as:1,status:'live',kick:dateStr+'T16:00:00Z',min:78,league:'الدوري المصري',lid:'epl-eg'}
      ].map(function(m){
        m.commentator = COMMENTATORS[Math.floor(Math.random()*COMMENTATORS.length)];
        return m;
      });
    }

    // ── Render leagues ──
    function renderLeagues() {
      var el = document.getElementById('leagues');
      el.innerHTML = LEAGUES.map(function(l){
        return '<button class="league-btn'+(l.id===currentLeague?' active':'')+'" onclick="setLeague(\''+l.id+'\')">'+l.label+'</button>';
      }).join('');
    }

    // ── Render matches ──
    function render() {
      var dateStr = fmt(currentDate);
      allMatches = generateMatches(dateStr);

      var filtered = allMatches;
      if (currentLeague !== 'all') filtered = filtered.filter(function(m){return m.lid===currentLeague;});
      if (favOnly) filtered = filtered.filter(function(m){return favs.indexOf(m.id)!==-1;});

      var liveN = allMatches.filter(function(m){return m.status==='live'||m.status==='halftime';}).length;
      var badge = document.getElementById('liveBadge');
      if(liveN>0){badge.style.display='inline-flex';document.getElementById('liveCount').textContent=liveN;}
      else{badge.style.display='none';}

      document.getElementById('dateLabel').textContent = currentDate.toLocaleDateString('ar-SA',{weekday:'long',year:'numeric',month:'long',day:'numeric'});

      document.getElementById('loadingState').style.display='none';
      var grid = document.getElementById('matchGrid');
      var empty = document.getElementById('emptyState');
      document.getElementById('statusBar').textContent = 'آخر تحديث: '+new Date().toLocaleTimeString('ar-SA',{hour:'2-digit',minute:'2-digit',second:'2-digit'})+' · يتم التحديث تلقائياً كل 30 ثانية';

      if(filtered.length===0){grid.innerHTML='';empty.style.display='flex';return;}
      empty.style.display='none';

      grid.innerHTML = filtered.map(function(m){
        var isLive = m.status==='live'||m.status==='halftime';
        var isFav = favs.indexOf(m.id)!==-1;
        var kickTime = new Date(m.kick).toLocaleTimeString('ar-SA',{hour:'2-digit',minute:'2-digit'});

        return '<div class="card'+(isLive?' is-live':'')+'">'
          +'<div class="card-top"><span class="card-league">'+m.league+'</span>'
          +'<span class="card-status st-'+m.status+'">'+STATUS_AR[m.status]+(m.min!==null&&m.status!=='finished'?' '+m.min+"'":'')+'</span></div>'
          +'<div class="card-body"><div class="teams-row">'
          +'<div class="team"><div class="team-logo">'+m.home.charAt(0)+'</div><div class="team-name">'+m.home+'</div></div>'
          +'<div class="score-area">'
          +(m.status==='scheduled'
            ?'<div class="time-display">'+kickTime+'</div>'
            :'<div class="score"><span>'+(m.hs??0)+'</span><span class="sep">-</span><span>'+(m.as??0)+'</span></div>')
          +(isLive?'<div class="minute-tag">&#9201; الدقيقة '+m.min+"'"+'</div>':'')
          +'</div>'
          +'<div class="team"><div class="team-logo">'+m.away.charAt(0)+'</div><div class="team-name">'+m.away+'</div></div>'
          +'</div>'
          +(m.commentator?'<div class="commentator"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/></svg><span>المعلق: '+m.commentator+'</span></div>':'')
          +'</div>'
          +'<div class="card-actions">'
          +'<button class="action-btn'+(isFav?' fav-on':'')+'" onclick="toggleFav(\''+m.id+'\')">'
          +'<svg viewBox="0 0 24 24" fill="'+(isFav?'currentColor':'none')+'" stroke="currentColor" stroke-width="2"><path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>'
          +(isFav?'مفضلة':'تفضيل')
          +'</button>'
          +'<button class="action-btn" onclick="toggleNotif(this)">'
          +'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg>'
          +'تنبيه</button></div></div>';
      }).join('');
    }

    function fmt(d){return d.getFullYear()+'-'+String(d.getMonth()+1).padStart(2,'0')+'-'+String(d.getDate()).padStart(2,'0');}

    function shiftDate(n){currentDate.setDate(currentDate.getDate()+n);render();renderLeagues();}
    function goToday(){currentDate=new Date();render();renderLeagues();}
    function setLeague(id){currentLeague=id;render();renderLeagues();}

    function toggleFav(id){
      var i=favs.indexOf(id);
      if(i===-1)favs.push(id);else favs.splice(i,1);
      localStorage.setItem('fav-matches',JSON.stringify(favs));
      render();
    }

    function toggleFavFilter(){
      favOnly=!favOnly;
      document.getElementById('favFilter').classList.toggle('active',favOnly);
      render();
    }

    function toggleView(){
      listView=!listView;
      var g=document.getElementById('matchGrid');
      g.classList.toggle('list-view',listView);
      var icon=document.getElementById('viewIcon');
      icon.innerHTML=listView
        ?'<path stroke-linecap="round" stroke-linejoin="round" d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm10 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zm10 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"/>'
        :'<path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>';
    }

    function toggleNotif(btn){
      var on=btn.classList.toggle('notif-on');
      btn.lastChild.textContent=on?'تنبيه فعّال':'تنبيه';
      if(on&&'Notification' in window)Notification.requestPermission();
    }

    // ── Init ──
    renderLeagues();
    render();
    setInterval(render, 30000);
  </script>
</body>
</html>
